language: elixir
elixir: 1.8
otp_release: 21.0
jobs:
  include:
    - stage: test
      elixir: 1.6
      otp_release: 20.0
      script: &test_scripts
        - mix test
        - MIX_ENV=test mix credo
    - stage: test
      script: *test_scripts
    - stage: deploy
      script: skip
      deploy:
        provider: script
        script: mix hex.publish --yes --dry-run
        skip_cleanup: true
